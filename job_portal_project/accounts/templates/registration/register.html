{% extends "base.html" %}
{% load static %}

{% block title %}HireSmart - Register{% endblock %}

{% block content %}

<a href="{% url "home_page" %}" class='absolute top-10 left-10 text-blue-700 underline'> 
  <i class="fa-solid fa-arrow-left"></i> Back To Home
</a>

<section class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900">
  <div class="w-full max-w-xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden grid grid-cols-1">
    
   

    <!-- Right Form -->
    <div class="p-10">
      <h2 class="text-3xl font-bold text-center text-gray-800 dark:text-white mb-6">Create an Account</h2>

      <form method="POST" class="space-y-6">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-700 dark:text-gray-200 mb-1">First Name</label>
            <input type="text" name="first_name" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
          </div>

          <div>
            <label class="block text-gray-700 dark:text-gray-200 mb-1">Last Name</label>
            <input type="text" name="last_name" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
          </div>

          <div>
            <label class="block text-gray-700 dark:text-gray-200 mb-1">Username</label>
            <input type="text" name="username" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
          </div>

          <div>
            <label class="block text-gray-700 dark:text-gray-200 mb-1">Email</label>
            <input type="email" name="email" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
          </div>

          <div>
            <label class="block text-gray-700 dark:text-gray-200 mb-1">Password</label>
            <input type="password" name="password1" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
          </div>

          <div>
            <label class="block text-gray-700 dark:text-gray-200 mb-1">Confirm Password</label>
            <input type="password" name="password2" required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
          </div>

          <div>
            <label class="block text-gray-700 dark:text-gray-200 mb-1">Select Role</label>
              <select name="role" id="id_role" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
                <option>-- Role --</option>
                <option value="job_seeker">Job Seeker</option>
                <option value="employer">Employer</option>
              </select>
          </div>
        </div>

        <!-- Employer Section -->
        <div id="employer-fields" class="hidden mt-6 border-t border-gray-300 dark:border-gray-600 pt-6">
          <h4 class="text-xl font-semibold text-gray-800 dark:text-white mb-4">Company Details</h4>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-gray-700 dark:text-gray-200 mb-1">Company Name</label>
              <input type="text" name="company_name"
                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
            </div>

            <div>
              <label class="block text-gray-700 dark:text-gray-200 mb-1">Company Location</label>
              <input type="text" name="company_location" 
                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
            </div>

            <div>
              <label class="block text-gray-700 dark:text-gray-200 mb-1">Company Email</label>
              <input type="email" name="company_email" 
                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
            </div>

            <div>
              <label class="block text-gray-700 dark:text-gray-200 mb-1">Company Contact</label>
              <input type="text" name="company_contact" 
                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
            </div>

            <div>
              <label class="block text-gray-700 dark:text-gray-200 mb-1">Company Website (optional)</label>
              <input type="text" name="company_website" 
                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
            </div>
          </div>
        </div>

        <button type="submit"
          class="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition">
          Register
        </button>
      </form>

      <p class="mt-6 text-center text-sm text-gray-600 dark:text-gray-400">
        Already have an account?
        <a href="{% url 'login_view' %}" class="text-blue-600 hover:underline">Login here</a>.
      </p>
    </div>
  </div>
</section>

<!-- JavaScript to Toggle Employer Fields -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const roleField = document.getElementById("id_role");
    const employerFields = document.getElementById("employer-fields");

    function toggleEmployerFields() {
      employerFields.classList.toggle("hidden", roleField.value !== "employer");
    }

    toggleEmployerFields(); // Run on load
    roleField.addEventListener("change", toggleEmployerFields);
  });
</script>

{% endblock %}
